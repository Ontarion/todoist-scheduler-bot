# –ú–∏–≥—Ä–∞—Ü–∏—è —Å Python –Ω–∞ Kotlin + Spring Boot

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∫–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ —Å Python –≤–µ—Ä—Å–∏–∏ –Ω–∞ Kotlin + Spring Boot –≤–µ—Ä—Å–∏—é Todoist Scheduler Bot.

## üéØ –û–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ü—Ä–æ–µ–∫—Ç –±—ã–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω —Å Python –Ω–∞ Kotlin —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Spring Boot framework. –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã, –Ω–æ —É–ª—É—á—à–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –Ø–∑—ã–∫ –∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **–ë—ã–ª–æ**: Python 3.13.1 + python-telegram-bot + aiohttp
- **–°—Ç–∞–ª–æ**: Kotlin 1.9.20 + Spring Boot 3.2.0 + WebFlux

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **–ë—ã–ª–æ**: –ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —Å –∏–º–ø–æ—Ä—Ç–∞–º–∏ –º–æ–¥—É–ª–µ–π
- **–°—Ç–∞–ª–æ**: –ú–æ–¥—É–ª—å–Ω–∞—è Spring Boot –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å dependency injection

### HTTP –∫–ª–∏–µ–Ω—Ç
- **–ë—ã–ª–æ**: aiohttp –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–°—Ç–∞–ª–æ**: Spring WebFlux WebClient (—Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–π)

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- **–ë—ã–ª–æ**: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è + JSON –ø–∞—Ä—Å–∏–Ω–≥
- **–°—Ç–∞–ª–æ**: Spring Boot Configuration Properties + YAML/Properties

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

| –ê—Å–ø–µ–∫—Ç | Python –≤–µ—Ä—Å–∏—è | Kotlin –≤–µ—Ä—Å–∏—è |
|--------|---------------|---------------|
| **–í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞** | ~2-3 —Å–µ–∫—É–Ω–¥—ã | ~5-8 —Å–µ–∫—É–Ω–¥ (JVM warmup) |
| **–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏** | ~50-80 MB | ~200-300 MB (JVM) |
| **CPU –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** | –ù–∏–∑–∫–æ–µ | –°—Ä–µ–¥–Ω–µ–µ (JIT –∫–æ–º–ø–∏–ª—è—Ü–∏—è) |
| **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** | –•–æ—Ä–æ—à–∞—è | –û—Ç–ª–∏—á–Ω–∞—è (Spring Boot) |
| **–ü–æ–¥–¥–µ—Ä–∂–∫–∞** | Python —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞ | JVM —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞ |

## üîÑ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –æ—Å—Ç–∞–ª–∏—Å—å —Ç–µ–º–∏ –∂–µ:

```bash
# –≠—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –æ–±–µ–∏—Ö –≤–µ—Ä—Å–∏—è—Ö
TELEGRAM_BOT_TOKEN=your_bot_token
TODOIST_API_TOKEN=your_todoist_token
ALLOWED_USERS=[123456789,987654321]
USERS_CONFIG={"user_id":{"todoist_token":"token","event_title":"–°—Ç—Ä–∏–∂–∫–∞"}}
```

### –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

Kotlin –≤–µ—Ä—Å–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç Spring Boot –ø—Ä–æ—Ñ–∏–ª–∏:

```bash
# –ü—Ä–æ—Ñ–∏–ª–∏ Spring Boot
SPRING_PROFILES_ACTIVE=prod,docker  # –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
SPRING_PROFILES_ACTIVE=test         # –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
LOGGING_LEVEL_COM_EXAMPLE=DEBUG
LOGGING_LEVEL_ORG_SPRINGFRAMEWORK_WEB=INFO
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–æ–≤

```
kotlin-spring-boot/
‚îú‚îÄ‚îÄ config/           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ AppConfig.kt
‚îÇ   ‚îú‚îÄ‚îÄ TelegramConfig.kt
‚îÇ   ‚îî‚îÄ‚îÄ TodoistConfig.kt
‚îú‚îÄ‚îÄ service/          # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ DateParser.kt
‚îÇ   ‚îú‚îÄ‚îÄ UserManager.kt
‚îÇ   ‚îî‚îÄ‚îÄ TodoistClient.kt
‚îú‚îÄ‚îÄ bot/              # Telegram –±–æ—Ç
‚îÇ   ‚îî‚îÄ‚îÄ HaircutBot.kt
‚îî‚îÄ‚îÄ TodoistSchedulerBotApplication.kt
```

### Dependency Injection

Kotlin –≤–µ—Ä—Å–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Spring DI:

```kotlin
@Service
class TodoistClient(
    private val todoistConfig: TodoistConfig,
    private val webClientBuilder: WebClient.Builder
) {
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—ä–µ–∫—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
}
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Docker

**Python –≤–µ—Ä—Å–∏—è:**
```bash
docker build -t todoist-bot .
docker run -e TELEGRAM_BOT_TOKEN=... todoist-bot
```

**Kotlin –≤–µ—Ä—Å–∏—è:**
```bash
cd kotlin-spring-boot
docker-compose up --build
```

### –†–µ—Å—É—Ä—Å—ã

Kotlin –≤–µ—Ä—Å–∏—è —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤:

- **RAM**: –ú–∏–Ω–∏–º—É–º 256MB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 512MB)
- **CPU**: –ú–∏–Ω–∏–º—É–º 0.5 —è–¥—Ä–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 1 —è–¥—Ä–æ)
- **–î–∏—Å–∫**: ~200MB –¥–ª—è –æ–±—Ä–∞–∑–∞ (–≤–∫–ª—é—á–∞—è JRE)

## üîç –û—Ç–ª–∞–¥–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏

**Python –≤–µ—Ä—Å–∏—è:**
```
2024-11-01 10:00:00 - __main__ - INFO - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞...
```

**Kotlin –≤–µ—Ä—Å–∏—è:**
```
2024-11-01 10:00:00 - INFO - Starting TodoistSchedulerBotApplication
2024-11-01 10:00:00 - INFO - Bot registered successfully
```

### Health Checks

Kotlin –≤–µ—Ä—Å–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç health endpoints:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
curl http://localhost:8080/actuator/health

# –ú–µ—Ç—Ä–∏–∫–∏
curl http://localhost:8080/actuator/metrics
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ú–æ–¥—É–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**Python –≤–µ—Ä—Å–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ pytest/unittest
**Kotlin –≤–µ—Ä—Å–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç JUnit 5 + Kotest

```kotlin
@SpringBootTest
class TodoistClientTest {
    @Autowired
    lateinit var todoistClient: TodoistClient

    @Test
    fun `should create haircut event`() {
        // –¢–µ—Å—Ç—ã
    }
}
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –£–ª—É—á—à–µ–Ω–∏—è –≤ Kotlin –≤–µ—Ä—Å–∏–∏

- **Type Safety**: Kotlin's null safety –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç NPE
- **Immutable Objects**: Data classes –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é immutable
- **Spring Security**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
- **Configuration Encryption**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Jasypt –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥–æ–≤

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

### –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

Kotlin –≤–µ—Ä—Å–∏—è –ª—É—á—à–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**
- **–ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏**
- **Load balancing**
- **Database integration**

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º–∞:

```json
{
  "123456789": {
    "todoist_token": "your_token",
    "event_title": "–°—Ç—Ä–∏–∂–∫–∞",
    "add_comment": true
  }
}
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ —Ä–∞–∑–ª–∏—á–∏—è

### –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

1. **–í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞**: Kotlin –≤–µ—Ä—Å–∏—è –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω–µ–µ –∏–∑-–∑–∞ JVM
2. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –î—Ä—É–≥–æ–π —Ñ–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤ (Spring Boot)
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –ë–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
4. **–ü–∞–º—è—Ç—å**: –ë–æ–ª—å—à–µ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–¢–∏–ø–∏–∑–∞—Ü–∏—è**: –ü–æ–ª–Ω–∞—è type safety
2. **Null Safety**: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ null pointer exceptions
3. **Reactive Programming**: WebFlux –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
4. **Spring Ecosystem**: –î–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º Spring –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Python –≤–µ—Ä—Å–∏—é
- –ë—ã—Å—Ç—Ä–æ–µ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã (RAM < 256MB)
- –ü—Ä–æ—Å—Ç–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ shared hosting
- –ö–æ–º–∞–Ω–¥–∞ –∑–Ω–∞–∫–æ–º–∞ —Ç–æ–ª—å–∫–æ —Å Python

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Kotlin –≤–µ—Ä—Å–∏—é
- –ü—Ä–æ–¥–∞–∫—à–Ω —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞
- –ö–æ–º–∞–Ω–¥–∞ —Å Java/Kotlin –æ–ø—ã—Ç–æ–º
- –ù—É–∂–Ω—ã enterprise –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**: `docker logs <container_name>`
2. **–°—Ä–∞–≤–Ω–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é**: –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç—å**: –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –¥–æ—Å—Ç—É–ø–µ –∫ API
4. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Ä–µ—Å—É—Ä—Å—ã**: JVM –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –±–æ–ª—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

Kotlin + Spring Boot –≤–µ—Ä—Å–∏—è –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—É—é –∏ –Ω–∞–¥–µ–∂–Ω—É—é –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É Python –≤–µ—Ä—Å–∏–∏. –•–æ—Ç—è –æ–Ω–∞ —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ, –æ–Ω–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ª—É—á—à—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ –∏ –±–æ–ª—å—à–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è.

**–ì–æ—Ç–æ–≤—ã –∫ –º–∏–≥—Ä–∞—Ü–∏–∏?** –°–ª–µ–¥—É–π—Ç–µ [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤—É –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ](./INSTALLATION.md) –¥–ª—è Kotlin –≤–µ—Ä—Å–∏–∏.
